# Laravelç’°å¢ƒã§å–ã‚Šå…¥ã‚Œã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆTips4é¸

--- 

## è‡ªå·±ç´¹ä»‹

- æ ªå¼ä¼šç¤¾SCOUTER CTO
- @kotamat

---

## SCOUTERã¨ã¯

![ä¼šç¤¾ç´¹ä»‹](assets/img/scouter-1.png)

---

## LaraVueå‹‰å¼·ä¼š

![LaraVue](assets/img/laravue.png)

- Laravel ã¨ Vue.jsã®å‹‰å¼·ä¼š
- æ¬¡å›ã¯4æœˆãã‚‰ã„ã«é–‹å‚¬äºˆå®š

---
## ã¿ãªã•ã‚“ãƒ†ã‚¹ãƒˆã‚„ã£ã¦ã¾ã™ã‹ï¼Ÿ

ğŸ™‹

---  

![t_wada](https://connpass-tokyo.s3.amazonaws.com/event/27540/41d84cf0e6494e2e91e51ad8e9c85310.png)


---

## ä»Šæ—¥è©±ã™ã“ã¨

- æŒ¯ã‚‹èˆã„ç³»
    - APIspecãƒ†ã‚¹ãƒˆ
    - ModelFactory
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç³»
    - å…¨ãƒšã‚¢ãƒ†ã‚¹ãƒˆ
    - Table Driven Test

--- 

## APIspecãƒ†ã‚¹ãƒˆ

- Laravelã«æ¨™æº–ã§æ­è¼‰ã•ã‚Œã¦ã„ã‚‹restç³»é–¢æ•°ã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆ
- APIã®IOå…¨ä½“ã®æŒ¯ã‚‹èˆã„ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã®ã«ç°¡å˜ã«ä½¿ãˆã‚‹

---

### å‘¼ã³å‡ºã—æ–¹

---?code=tests/Feature/ApiTest.php&lang=php

@[14-16](GETãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ã¦ãŠã)
@[18-19](routeã®ç¬¬äºŒå¼•æ•°ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹å–å¾—)
@[21](ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹200ã‹ã©ã†ã‹ãƒã‚§ãƒƒã‚¯)
@[22](å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’print_rã§è¡¨ç¤º)
@[30-32](POSTã‚‚åŒæ§˜ã«é…åˆ—ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©)
@[34-35](ä»Šåº¦ã¯postJsonã®ç¬¬äºŒå¼•æ•°ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™(getãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã¯ãªã„ã®ã§))
@[37](ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹200ã‹ã©ã†ã‹ãƒã‚§ãƒƒã‚¯)
@[38](å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’print_rã§è¡¨ç¤º)
@[44](PUTã®å ´åˆã¯)
@[46-51](é€ä¿¡ãƒ‡ãƒ¼ã‚¿ã¨GETãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åŒæ–¹å®šç¾©ã—)
@[54](routeã®ç¬¬äºŒå¼•æ•°ã¨ã€putJsonã®ç¬¬äºŒå¼•æ•°ãã‚Œãã‚Œã«æ¸¡ã—ã¦ã‚ã’ã¦)
@[37](ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹200ã‹ã©ã†ã‹ãƒã‚§ãƒƒã‚¯)
@[38](å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’print_rã§è¡¨ç¤º)
@[63-74](deleteã‚‚åŒæ§˜)

--- 

### å®Ÿè¡Œçµæœ

```
Array
(
    [status] => huga
)
Array
(
    [name] => hoge
)
Array
(
    [id] => 1
    [name] => hoge
)
Array
(
    [id] => 1
)
```

@[1-4](GET)
@[5-8](POST)
@[9-13](PUT)
@[14-17](DELETE)

--- 

### å¿œç”¨

- ã“ã‚Œã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€APIå®šç¾©æ›¸ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚‹ã€‚
- è‰²ã€…ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«APIå®šç¾©æ›¸è‡ªå‹•ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã—ãŸã€‚
- [kotamat/laravel-apispec-generator](https://github.com/kotamat/laravel-apispec-generator)

--- 

#### ä½¿ã„æ–¹

---

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
composer require --dev kotamat/laravel-apispec-generator
```

---?code=composer.json&lang=php

@[17](composer requireã§kotamat/laravel-apispec-generatorã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)

---

#### TestCaseã‚’æ‹¡å¼µ

---?code=tests/ApiSpecTestCase.php&lang=php

@[5-7](ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹TestCaseã‚¯ãƒ©ã‚¹ã«ã¦ã€ApiSpecTestCaseã‚’extendã™ã‚‹ã‚ˆã†ã«ä¿®æ­£)

---

#### ãƒ†ã‚¹ãƒˆã‚’æ›¸ã

---?code=tests/Feature/ApiWithSpecTest.php&lang=php

@[9](å®Ÿéš›ã®ã‚¯ãƒ©ã‚¹ã§ã¯$isExportSpec=trueã«ã—ãŸã‚ã¨)
@[13-23](å…ˆç¨‹ã¨åŒæ§˜ã«ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°)
@[28-38](å…ˆç¨‹ã¨åŒæ§˜ã«ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°)
@[43-56](å…ˆç¨‹ã¨åŒæ§˜ã«ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°)
@[61-71](å…ˆç¨‹ã¨åŒæ§˜ã«ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°)

---

#### storage/appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å‡ºåŠ›

---?code=storage/app/api/test?page=1/GET.http&lang=http

@[1](å®Ÿéš›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ)
@[2-3](å„ç¨®ãƒ˜ãƒƒãƒ€ãƒ¼)
@[5-8](è¿”ã‚Šå€¤JSON)

## ModelFactory

---


## å…¨ãƒšã‚¢ãƒ†ã‚¹ãƒˆ

--- 

## Table Driven Test
